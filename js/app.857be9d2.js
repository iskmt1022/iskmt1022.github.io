(function(t){function e(e){for(var s,l,n=e[0],r=e[1],c=e[2],h=0,m=[];h<n.length;h++)l=n[h],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&m.push(i[l][0]),i[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(s=!1)}s&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},i={app:0},o=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=r;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"054c":function(t,e,a){},"08f1":function(t,e,a){"use strict";a("4d4c")},1:function(t,e){},2:function(t,e){},"316a":function(t,e,a){"use strict";a("054c")},"4d4c":function(t,e,a){},"56a1":function(t,e,a){t.exports=a.p+"img/books.42cc0048.png"},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.isSignedIn?a("v-navigation-drawer",{attrs:{app:"",bottom:"",height:"auto"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-btn",{attrs:{color:"primary",tile:"",block:"",depressed:"",height:"48px"},on:{click:function(e){return t.openHome()}}},[t._v("Home")]),a("v-btn",{attrs:{tile:"",block:"",depressed:"",height:"48px"},on:{click:t.openCalcBooks}},[t._v("お小遣い帳簿")]),a("v-btn",{attrs:{tile:"",block:"",depressed:"",height:"48px"},on:{click:t.openShoppingList}},[t._v("買うものかご")]),a("amplify-sign-out")],1):t._e(),t.isSignedIn?a("v-app-bar",{attrs:{app:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("坂元家のアプリ V2")])],1):t._e(),a("v-main",[a("router-view")],1)],1)},o=[],l=a("2f62"),n=a("0e44");s["a"].use(l["a"]);var r=new l["a"].Store({state:{user:null,Personal:[],baseUrl:null},mutations:{setUser(t,e){t.user=e},setBaseUrl(t,e){t.baseUrl=e}},actions:{Personal:t=>t.Personal},modules:{},plugins:[Object(n["a"])({storage:window.sessionStorage})]}),c={data:()=>({drawer:null,overlay:!1,baseUrl:"https://script.google.com/macros/s/AKfycbxZiEN6WjjWM1k4C6bMrkofZqo_aCfccml-8QIzpC2SNCq-aEwL2SVLBvQ5qAV5CSEAiQ/exec"}),created:function(){r.commit("setBaseUrl",this.baseUrl)},computed:{isSignedIn(){return!0}},methods:{openHome(){this.$router.push({name:"Home"}),this.drawer=!1},openCalcBooks(){this.$router.push({name:"CalcBooks"}),this.drawer=!1},openCalcWash(){this.$router.push({name:"CalcWash"}),this.drawer=!1},openShoppingList(){this.$router.push({name:"ShoppingList"}),this.drawer=!1},funcLoad(t){this.overlay=t}}},d=c,h=(a("5c0b"),a("2877")),m=a("6544"),u=a.n(m),p=a("7496"),v=a("40dc"),f=a("5bc1"),b=a("8336"),g=a("f6c4"),_=a("f774"),D=a("2a7f"),w=Object(h["a"])(d,i,o,!1,null,null,null),y=w.exports;u()(w,{VApp:p["a"],VAppBar:v["a"],VAppBarNavIcon:f["a"],VBtn:b["a"],VMain:g["a"],VNavigationDrawer:_["a"],VToolbarTitle:D["a"]});var k=a("f309");s["a"].use(k["a"]);var C=new k["a"]({}),x=a("8c4f"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"signin-part"}},[a("amplify-auth-container",[a("amplify-authenticator")],1),a("div",{attrs:{id:"button-part"}},[a("v-btn",{attrs:{block:"",tile:"",depressed:"",color:"transparent"},on:{click:function(e){return t.forceReload()}}},[t._v("キャッシュ削除")])],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-text",{staticStyle:{"padding-top":"20px","padding-bottom":"10px"}},[a("v-text-field",{ref:"password",attrs:{label:"Password(数字4桁)",type:"password"},model:{value:t.passcode,callback:function(e){t.passcode=e},expression:"passcode"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.setLogin()}}},[t._v("OK")])],1)],1)],1),a("v-overlay",{attrs:{value:t.overlay,absolute:""}},[a("v-progress-circular",{attrs:{indeterminate:""}})],1)],1)},L=[],I={name:"SignIn",data(){return{dialog:!1,passcode:null,overlay:!1}},created:function(){this.dialog=!0},methods:{forceReload(){window.location.reload(!0)},async setLogin(){this.funcLoad(!0),this.dialog=!1;const t=r.state.baseUrl+"?keyword=auth&password="+this.passcode,e={method:"GET"},a=await this.fetchData(t,e);"ok"==a.code?(r.commit("setUser",{password:this.passcode}),this.$router.push({name:"Home"})):(this.passcode="",this.dialog=!0),this.funcLoad(!1)},async fetchData(t,e){let a=null;try{const s=await fetch(t,e);a=await s.json()}catch(s){console.error("Error:",s)}return a},funcLoad(t){this.overlay=t}},watch:{dialog:function(t){t&&setTimeout(()=>{this.$refs.password.focus()},200)}}},V=I,P=(a("ce3e"),a("b0af")),N=a("99d9"),T=a("169a"),j=a("a797"),B=a("490a"),O=a("2fa4"),A=a("8654"),E=Object(h["a"])(V,S,L,!1,null,null,null),U=E.exports;u()(E,{VBtn:b["a"],VCard:P["a"],VCardActions:N["a"],VCardText:N["b"],VDialog:T["a"],VOverlay:j["a"],VProgressCircular:B["a"],VSpacer:O["a"],VTextField:A["a"]});var $=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pa-4",attrs:{id:"home"}},[s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("v-card",{attrs:{height:"150"},on:{click:function(e){return t.openCalcBooks()}}},[s("v-img",{attrs:{height:"120",contain:"",src:a("56a1")}}),s("v-card-text",{staticClass:"pa-0"},[t._v("お小遣い帳簿")])],1)],1),s("v-col",{attrs:{cols:"6"}},[s("v-card",{attrs:{height:"150"},on:{click:function(e){return t.openShopping()}}},[s("v-img",{attrs:{height:"120",contain:"",src:a("f70f")}}),s("v-card-text",{staticClass:"pa-0"},[t._v("買うものかご")])],1)],1)],1)],1)},M=[],z={name:"Home",methods:{openCalcBooks(){this.$router.push({name:"CalcBooks"})},openCalcWash(){this.$router.push({name:"CalcWash"})},openShopping(){this.$router.push({name:"ShoppingList"})}}},H=z,q=(a("08f1"),a("62ad")),Y=a("adda"),F=a("0fd9"),J=Object(h["a"])(H,$,M,!1,null,"f82fc60e",null),G=J.exports;u()(J,{VCard:P["a"],VCardText:N["b"],VCol:q["a"],VImg:Y["a"],VRow:F["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"calc-books"}},[a("v-overlay",{attrs:{value:t.overlay,"z-index":"999",absolute:""}},[a("v-progress-circular",{attrs:{indeterminate:""}})],1),a("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v("パパ")]),a("v-tab",[t._v("ママ")]),a("v-tab",[t._v("みお")]),a("v-tab",[t._v("えみ")])],1),a("v-data-table",{attrs:{"mobile-breakpoint":"0",loading:t.isLoading,headers:t.headers,items:this.selectData.table,"sort-by":["date"],"sort-desc":[!0]},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("合計："+t._s(t.selectData.total))]),a("v-spacer"),a("v-btn",{on:{click:function(e){e.stopPropagation(),t.freeIncomeDialog=!0}}},[t._v("フリー")]),a("v-btn",{on:{click:function(e){e.stopPropagation(),t.outgoDialog=!0}}},[t._v("支出")])],1)]},proxy:!0}])}),a("v-dialog",{model:{value:t.freeIncomeDialog,callback:function(e){t.freeIncomeDialog=e},expression:"freeIncomeDialog"}},[a("v-card",[a("v-card-title",[t._v("★収入（フリー入力）")]),a("v-row",{staticClass:"pt-5",attrs:{justify:"center","align-content":"center"}},[a("v-col",{staticClass:"pa-0 d-flex justify-center align-center",attrs:{cols:"4"}},[t._v("変更前：")]),a("v-col",{staticClass:"pa-0",attrs:{cols:"4"}},[t._v(t._s(t.selectData.total)+" 円")])],1),a("v-row",{attrs:{justify:"center","align-content":"center"}},[a("v-col",{staticClass:"pa-0 d-flex justify-center align-center",attrs:{cols:"4"}},[t._v("追加金額：")]),a("v-col",{staticClass:"pa-0",attrs:{cols:"4"}},[a("v-text-field",{attrs:{suffix:"円","single-line":"",type:"number"},model:{value:t.add,callback:function(e){t.add=e},expression:"add"}})],1)],1),a("v-row",{staticClass:"mt-0"},[a("v-spacer"),a("v-col",{staticClass:"pt-0",attrs:{cols:"10"}},[a("v-divider"),a("v-divider"),a("v-divider"),a("v-divider")],1)],1),a("v-row",{staticClass:"pb-5",attrs:{justify:"center","align-content":"center"}},[a("v-col",{staticClass:"pa-0 d-flex justify-center align-center",attrs:{cols:"4"}},[t._v("変更後：")]),a("v-col",{staticClass:"pa-0",attrs:{cols:"4"}},[t._v(t._s(t.selectData.total+Number(t.add))+" 円")])],1),a("v-row",{staticClass:"pb-3"},[a("v-spacer"),a("v-col",{staticClass:"pa-0",attrs:{cols:"2"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.clickSubmitFreeIncome()}}},[t._v("確定")])],1),a("v-col",{staticClass:"pa-0 mr-3",attrs:{cols:"3"}},[a("v-btn",{on:{click:function(e){t.add=null}}},[t._v("クリア")])],1)],1)],1)],1),a("v-dialog",{model:{value:t.moveIncomeDialog,callback:function(e){t.moveIncomeDialog=e},expression:"moveIncomeDialog"}},[a("v-card",{staticClass:"pa-3"},[a("v-card-title",{staticClass:"pl-0 pr-0",attrs:{"justify-content":"center"}},[t._v("★収入（洗い物小遣いから移動）")]),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"5"}},[a("v-subheader",{staticClass:"text-body-1"},[t._v("変更前")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"7"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false",disabled:""},model:{value:t.selectData.total,callback:function(e){t.$set(t.selectData,"total",e)},expression:"selectData.total"}})],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"5"}},[a("v-subheader",{staticClass:"text-body-1"},[t._v("洗い物小遣い")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"5"}},[a("v-text-field",{attrs:{value:t.selectData.total_wash-Number(t.add_part),dense:"",outlined:"","hide-details":"false",disabled:""}})],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"2"}},[a("v-btn",{staticClass:"pa-0",attrs:{color:"primary"},on:{click:function(e){t.add_part=0,t.add=t.selectData.total_wash}}},[t._v("全額")])],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"5"}},[a("v-subheader",{staticClass:"text-body-1"},[t._v("一部入金")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"7"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false"},model:{value:t.add_part,callback:function(e){t.add_part=e},expression:"add_part"}})],1)],1),a("v-divider"),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"5"}},[a("v-subheader",{staticClass:"text-body-1"},[t._v("変更後")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"7"}},[a("v-text-field",{attrs:{value:t.selectData.total+Number(t.add),dense:"",outlined:"","hide-details":"false",disabled:""}})],1)],1),a("v-row",{staticClass:"pb-3"},[a("v-spacer"),a("v-col",{staticClass:"pa-0",attrs:{cols:"4"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.clickSubmitMoveIncome()}}},[t._v("確定")])],1)],1)],1)],1),a("v-dialog",{model:{value:t.outgoDialog,callback:function(e){t.outgoDialog=e},expression:"outgoDialog"}},[a("v-card",[a("v-card-title",[t._v("★支出（フリー入力）")]),a("v-row",{staticClass:"pt-5",attrs:{justify:"center","align-content":"center"}},[a("v-col",{staticClass:"pa-0 d-flex justify-center align-center",attrs:{cols:"4"}},[t._v("変更前：")]),a("v-col",{staticClass:"pa-0",attrs:{cols:"4"}},[t._v(t._s(t.selectData.total)+" 円")])],1),a("v-row",{attrs:{justify:"center","align-content":"center"}},[a("v-col",{staticClass:"pa-0 d-flex justify-center align-center",attrs:{cols:"4"}},[t._v("削減金額：")]),a("v-col",{staticClass:"pa-0",attrs:{cols:"4"}},[a("v-text-field",{attrs:{prefix:"-",suffix:"円","single-line":"",type:"number"},model:{value:t.remove,callback:function(e){t.remove=e},expression:"remove"}})],1)],1),a("v-row",{staticClass:"mt-0"},[a("v-spacer"),a("v-col",{staticClass:"pt-0",attrs:{cols:"10"}},[a("v-divider"),a("v-divider"),a("v-divider"),a("v-divider")],1)],1),a("v-row",{staticClass:"pb-5",attrs:{justify:"center","align-content":"center"}},[a("v-col",{staticClass:"pa-0 d-flex justify-center align-center",attrs:{cols:"4"}},[t._v("変更後：")]),a("v-col",{staticClass:"pa-0",attrs:{cols:"4"}},[t._v(t._s(t.selectData.total-Number(t.remove))+" 円")])],1),a("v-row",{staticClass:"pb-3"},[a("v-spacer"),a("v-col",{staticClass:"pa-0",attrs:{cols:"2"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.clickSubmitOutgo()}}},[t._v("確定")])],1),a("v-col",{staticClass:"pa-0 mr-3",attrs:{cols:"3"}},[a("v-btn",{on:{click:function(e){t.remove=null}}},[t._v("クリア")])],1)],1)],1)],1)],1)},W=[],Q=a("a030");const Z="\n  mutation UpdatePersonal(\n    $input: UpdatePersonalInput!\n    $condition: ModelPersonalConditionInput\n  ) {\n    updatePersonal(input: $input, condition: $condition) {\n      id\n      name\n      total\n      total_wash\n      createdAt\n      updatedAt\n    }\n  }\n";var K={name:"CalcBooks",data(){return{isLoading:!0,overlay:!1,tab:null,freeIncomeDialog:!1,outgoDialog:!1,moveIncomeDialog:!1,add:null,add_part:null,remove:null,headers:[{text:"追加日",align:"start",value:"date"},{text:"追加金額",value:"fee"}],selectData:{total:null,table:[]},issei:{id:null,name:"issei",isCheck:!1,total:null,total_wash:null,table:[]},masami:{id:null,name:"masami",isCheck:!0,total:null,total_wash:null,table:[]},mio:{id:null,name:"mio",isCheck:!0,total:null,total_wash:null,table:[]},emi:{id:null,name:"emi",isCheck:!0,total:null,total_wash:null,table:[]},baseUrl:null}},created:async function(){this.baseUrl=r.state.baseUrl;const t=this.baseUrl+"?keyword=personal",e=await this.fetchData(t,{method:"GET"});"ok"==e.code&&(console.log(e),e.data.listPersonals.items.forEach(t=>{"issei"==t.name?(this.issei.id=t.id,this.issei.total=Number(t.total),this.issei.total_wash=t.total_wash):"masami"==t.name?(this.masami.id=t.id,this.masami.total=Number(t.total),this.masami.total_wash=t.total_wash):"mio"==t.name?(this.mio.id=t.id,this.mio.total=Number(t.total),this.mio.total_wash=t.total_wash):"emi"==t.name&&(this.emi.id=t.id,this.emi.total=Number(t.total),this.emi.total_wash=t.total_wash)})),await this.setTable(),this.isLoading=!1},computed:{tableItems(){let t=[];return this.selectData.table.forEach(e=>{t.push(e)}),t}},methods:{async fetchData(t,e){let a=null;try{const s=await fetch(t,e);a=await s.json()}catch(s){console.error("Error:",s)}return a},dateToStr24HPad0(t,e){return e||(e="YYYY/MM/DD hh:mm:ss"),e=e.replace(/YYYY/g,t.getFullYear()),e=e.replace(/MM/g,("0"+(t.getMonth()+1)).slice(-2)),e=e.replace(/DD/g,("0"+t.getDate()).slice(-2)),e=e.replace(/hh/g,("0"+t.getHours()).slice(-2)),e=e.replace(/mm/g,("0"+t.getMinutes()).slice(-2)),e=e.replace(/ss/g,("0"+t.getSeconds()).slice(-2)),e},formatDate(t){let e=new Date(t).toLocaleString({timeZone:"Asia/Tokyo"}),a=this.dateToStr24HPad0(new Date(e));return a},async setTable(){this.isLoading=!0;const t=this.baseUrl+"?keyword=book_list",e=await this.fetchData(t,{method:"GET"});if("ok"!=e.code)return;const a=e.data.listBooks.items;this.issei.table=[],this.masami.table=[],this.mio.table=[],this.emi.table=[],a.forEach(t=>{"issei"==t.personal_name?this.issei.table.push({date:this.formatDate(t.register_date),fee:t.register_fee}):"masami"==t.personal_name?this.masami.table.push({date:this.formatDate(t.register_date),fee:t.register_fee}):"mio"==t.personal_name?this.mio.table.push({date:this.formatDate(t.register_date),fee:t.register_fee}):"emi"==t.personal_name&&this.emi.table.push({date:this.formatDate(t.register_date),fee:t.register_fee})}),this.isLoading=!1},async createBooks(t,e){const a={id:crypto.randomUUID(),personal_name:t,register_date:new Date,register_fee:e},s=this.baseUrl+"?keyword=book_list&command=regist",i={method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},o=await this.fetchData(s,i);console.log(o),await this.setTable()},async clickSubmitFreeIncome(){if(null==this.add||0==Number(this.add))return;this.funcLoad(!0);const t={id:this.selectData.id,name:this.selectData.name,total:this.selectData.total+Number(this.add),total_wash:null},e=this.baseUrl+"?keyword=personal&command=update",a={method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},s=await this.fetchData(e,a);console.log(s),this.createBooks(this.selectData.name,Number(this.add)),this.selectData.total+=Number(this.add),this.add=null,this.funcLoad(!1),this.freeIncomeDialog=!1,this.setTable()},async clickSubmitMoveIncome(){if(null==this.add||0==Number(this.add))return;if(0==this.selectData.total_wash)return void(this.moveIncomeDialog=!1);this.$emit("loading",!0);const t={id:this.selectData.id,total:this.selectData.total+Number(this.add),total_wash:this.selectData.total_wash-Number(this.add)};await Q["a"].graphql({query:Z,variables:{input:t}}).then(t=>{console.log(t),this.createBooks(this.selectData.name,Number(this.add)),this.selectData.total+=Number(this.add),this.selectData.total_wash-=Number(this.add)}).catch(t=>{console.log(t)}).finally(()=>{this.$emit("loading",!1),this.moveIncomeDialog=!1,this.add=null,this.add_part=null,this.setTable()})},async clickSubmitOutgo(){if(null==this.remove||0==Number(this.remove))return;this.funcLoad(!0);const t={id:this.selectData.id,name:this.selectData.name,total:this.selectData.total-Number(this.remove),total_wash:null},e=this.baseUrl+"?keyword=personal&command=update",a={method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},s=await this.fetchData(e,a);console.log(s),this.createBooks(this.selectData.name,-Number(this.remove)),this.selectData.total-=Number(this.remove),this.remove=null,this.funcLoad(!1),this.outgoDialog=!1,this.setTable()},funcLoad(t){this.overlay=t}},watch:{tab:function(t){0==t?this.selectData=this.issei:1==t?this.selectData=this.masami:2==t?this.selectData=this.mio:3==t&&(this.selectData=this.emi)},add_part:function(t){Number(t)&&(this.add=t)}}},X=K,tt=a("8fea"),et=a("ce7e"),at=a("e0c7"),st=a("71a3"),it=a("fe57"),ot=a("71d9"),lt=Object(h["a"])(X,R,W,!1,null,"26661cb4",null),nt=lt.exports;u()(lt,{VBtn:b["a"],VCard:P["a"],VCardTitle:N["c"],VCol:q["a"],VDataTable:tt["a"],VDialog:T["a"],VDivider:et["a"],VOverlay:j["a"],VProgressCircular:B["a"],VRow:F["a"],VSpacer:O["a"],VSubheader:at["a"],VTab:st["a"],VTabs:it["a"],VTextField:A["a"],VToolbar:ot["a"],VToolbarTitle:D["a"]});var rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"shopping-list"}},[a("v-overlay",{attrs:{value:t.overlay,"z-index":"999",absolute:""}},[a("v-progress-circular",{attrs:{indeterminate:""}})],1),a("div",{attrs:{id:"main-part"}},[0==t.selectedItemList.length?a("div",[a("br"),t._v("No data. ")]):t._e(),a("v-list",{attrs:{expand:""}},t._l(t.selectedItemList,(function(e){return a("v-list-group",{key:e.id,attrs:{value:!0,"no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.shop_name)}})],1)]},proxy:!0}],null,!0)},t._l(e.item_list,(function(e){return a("v-list-item",{key:e.item_name},[a("v-list-item-action",[a("v-checkbox",{staticStyle:{width:"100%"},on:{change:function(a){return t.checkItem(e)}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"child.checked"}})],1),a("v-list-item-content",{attrs:{id:"my-list-item"}},[a("v-list-item-title",[t._v(t._s(e.item_name))]),e.memo||e.number>1?a("v-list-item-subtitle",[t._v(t._s(e.number)+"個、メモ："+t._s(e.memo))]):t._e()],1),a("v-list-item-action",{staticStyle:{width:"50px"}},[a("v-icon",{on:{click:function(a){return t.editItem(e)}}},[t._v("mdi-square-edit-outline")])],1)],1)})),1)})),1)],1),a("div",{attrs:{id:"footer-part"}},[a("v-row",{staticClass:"mt-2",attrs:{justify:"center",align:"end"}},[a("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"4"}},[a("v-btn",{attrs:{rounded:"",block:"",color:"primary"},on:{click:function(e){t.isAddPart=!0}}},[t._v(" 追加 ")])],1),a("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{rounded:"",block:"",color:"red darken-1"},on:{click:function(e){return t.doneShopping()}}},[t._v(" 購入 ")])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-btn",{attrs:{rounded:"",block:"",disabled:""},on:{click:function(e){return t.getHistory()}}},[t._v(" 購入履歴 ")])],1)],1)],1),a("v-dialog",{attrs:{persistent:""},model:{value:t.isAddPart,callback:function(e){t.isAddPart=e},expression:"isAddPart"}},[a("v-card",{staticClass:"pa-3"},[a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("買うもの")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false",autofocus:""},model:{value:t.addData.item_name,callback:function(e){t.$set(t.addData,"item_name",e)},expression:"addData.item_name"}})],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("個数")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false"},model:{value:t.addData.number,callback:function(e){t.$set(t.addData,"number",e)},expression:"addData.number"}})],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("メモ")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false"},model:{value:t.addData.memo,callback:function(e){t.$set(t.addData,"memo",e)},expression:"addData.memo"}})],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("予定店舗")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-select",{attrs:{"persistent-hint":"",items:t.shopList,"item-text":"shop_name","item-value":"id",dense:"","hide-details":"false",outlined:""},model:{value:t.addData.shop_id,callback:function(e){t.$set(t.addData,"shop_id",e)},expression:"addData.shop_id"}})],1)],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return t.registNewItem()}}},[t._v("登録")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:"red darken-1"},on:{click:function(e){return t.clearAddData()}}},[t._v("入力クリア")])],1)],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{block:""},on:{click:function(e){t.isAddPart=!1,t.clearAddData()}}},[t._v("閉じる")])],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:""},model:{value:t.isEditPart,callback:function(e){t.isEditPart=e},expression:"isEditPart"}},[a("v-card",{staticClass:"pa-3"},[a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("買うもの")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false"},model:{value:t.addData.item_name,callback:function(e){t.$set(t.addData,"item_name",e)},expression:"addData.item_name"}})],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("個数")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false"},model:{value:t.addData.number,callback:function(e){t.$set(t.addData,"number",e)},expression:"addData.number"}})],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("メモ")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false"},model:{value:t.addData.memo,callback:function(e){t.$set(t.addData,"memo",e)},expression:"addData.memo"}})],1)],1),a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("予定店舗")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-select",{attrs:{"persistent-hint":"",items:t.shopList,"item-text":"shop_name","item-value":"id",dense:"","hide-details":"false",outlined:""},model:{value:t.addData.shop_id,callback:function(e){t.$set(t.addData,"shop_id",e)},expression:"addData.shop_id"}})],1)],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return t.updateItem()}}},[t._v("更新")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{block:""},on:{click:function(e){t.isEditPart=!1,t.clearAddData()}}},[t._v("閉じる")])],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:""},model:{value:t.isAddShopPart,callback:function(e){t.isAddShopPart=e},expression:"isAddShopPart"}},[a("v-card",{staticClass:"pa-3"},[a("v-row",{staticClass:"ma-0",attrs:{align:"center",dense:""}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[a("v-subheader",[t._v("追加店舗名")])],1),a("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"false"},model:{value:t.addShopName,callback:function(e){t.addShopName=e},expression:"addShopName"}})],1)],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return t.registNewShop()}}},[t._v("登録")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{block:""},on:{click:function(e){t.isAddShopPart=!1,t.addShopName="",t.addData.shop_id="zzz-other"}}},[t._v("閉じる")])],1)],1)],1)],1)],1)},ct=[],dt={name:"ShoppingList",components:{},data(){return{overlay:!0,shopListDB:[],itemListDB:[],emptyStr:"　",isAddPart:!1,isEditPart:!1,addData:{id:null,item_name:"",number:1,memo:"",shop_id:"zzz-other"},isAddShopPart:!1,addShopName:"",baseUrl:null}},created:async function(){this.baseUrl=r.state.baseUrl,await this.getShopList(),await this.getItemList(),this.funcLoad(!1)},computed:{shopList(){console.log("method shopList");const t=[{id:"addOpe",shop_name:"店舗追加"},{id:"zzz-other",shop_name:"その他"}],e=t.concat(this.shopListDB);return e},selectedItemList(){const t=[];return this.itemListDB.forEach(e=>{const a=t.findIndex(t=>t.id==e.shop_id);if(-1==a){const a=this.shopList.find(t=>t.id==e.shop_id);t.push({...a,item_list:[{...e}]})}else t[a].item_list.push({...e})}),t.sort((function(t,e){return t.id<e.id?-1:t.id>e.id?1:0})),t}},methods:{async fetchData(t,e){let a=null;try{const s=await fetch(t,e);a=await s.json()}catch(s){console.error("Error:",s)}return a},async getShopList(){const t=this.baseUrl+"?keyword=shop_list",e=await this.fetchData(t,{method:"GET"});"ok"==e.code&&(console.log("getShopList",e),e.data.listSkmtShopLists.items.forEach(t=>{this.shopListDB.push({id:t.id,shop_name:t.shop_name})}))},async getItemList(){const t=this.baseUrl+"?keyword=item_list",e=await this.fetchData(t,{method:"GET"});"ok"==e.code&&(console.log("getItemList",e),e.data.listSkmtItemLists.items.forEach(t=>{this.itemListDB.push({id:t.id,item_name:t.item_name,number:t.number,memo:t.memo,shop_id:t.shop_id,checked:!1})}))},async deleteItem(t){const e=this.baseUrl+"?keyword=item_list&command=delete&id="+t,a=await this.fetchData(e,{method:"GET"});console.log(a);const s=this.itemListDB.findIndex(e=>e.id==t);this.itemListDB.splice(s,1)},clearAddData(){this.addData={id:null,item_name:"",number:1,memo:"",shop_id:"zzz-other"}},async doneShopping(){console.log("done",this.selectedItemList),this.selectedItemList.forEach(t=>{t.item_list.forEach(t=>{t.checked&&(async()=>{this.funcLoad(!0),await this.deleteItem(t.id),this.funcLoad(!1)})()})})},getHistory(){},async registNewItem(){if(!this.addData.item_name)return;this.funcLoad(!0);const t=this.baseUrl+"?keyword=item_list&command=regist";this.addData.id=crypto.randomUUID();const e={method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.addData)},a=await this.fetchData(t,e);console.log(a);const s=this.addData.shop_id;this.itemListDB.push({id:this.addData.id,item_name:this.addData.item_name,number:this.addData.number,memo:this.addData.memo,shop_id:this.addData.shop_id,checked:!1}),this.clearAddData(),this.addData.shop_id=s,this.funcLoad(!1)},async registNewShop(){if(!this.addShopName)return;this.funcLoad(!0);const t=this.baseUrl+"?keyword=shop_list&command=regist",e={id:crypto.randomUUID(),shop_name:this.addShopName},a={method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},s=await this.fetchData(t,a);console.log(s),this.isAddShopPart=!1,this.addShopName="",this.addData.shop_id=e.id,this.shopListDB.push(e),this.funcLoad(!1)},editItem(t){this.isEditPart=!0,this.addData=t},async updateItem(){if(!this.addData.item_name)return;this.funcLoad(!0);const t=this.baseUrl+"?keyword=item_list&command=update",e={method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.addData)},a=await this.fetchData(t,e);console.log(a);const s=Object.assign({},this.addData);this.clearAddData();const i=this.itemListDB.findIndex(t=>t.id==s.id);this.itemListDB[i]={id:s.id,item_name:s.item_name,number:s.number,memo:s.memo,shop_id:s.shop_id,checked:this.itemListDB[i].checked},this.itemListDB.splice(),this.isEditPart=!1,this.funcLoad(!1)},checkItem(t){const e=this.itemListDB.findIndex(e=>e.id===t.id);this.itemListDB.splice(e,1),this.itemListDB.push(t)},funcLoad(t){this.overlay=t}},watch:{"addData.shop_id":function(t){"addOpe"==t&&(this.isAddShopPart=!0)}}},ht=dt,mt=(a("316a"),a("ac7c")),ut=a("132d"),pt=a("8860"),vt=a("56b0"),ft=a("da13"),bt=a("1800"),gt=a("5d23"),_t=a("b974"),Dt=Object(h["a"])(ht,rt,ct,!1,null,"73d5d82a",null),wt=Dt.exports;u()(Dt,{VBtn:b["a"],VCard:P["a"],VCheckbox:mt["a"],VCol:q["a"],VDialog:T["a"],VIcon:ut["a"],VList:pt["a"],VListGroup:vt["a"],VListItem:ft["a"],VListItemAction:bt["a"],VListItemContent:gt["a"],VListItemSubtitle:gt["b"],VListItemTitle:gt["c"],VOverlay:j["a"],VProgressCircular:B["a"],VRow:F["a"],VSelect:_t["a"],VSubheader:at["a"],VTextField:A["a"]}),s["a"].use(x["a"]);const yt=[{path:"/",redirect:{name:"Home"}},{path:"/signin",name:"SignIn",component:U},{path:"/home",name:"Home",component:G,meta:{requireAuth:!0}},{path:"/calc-books",name:"CalcBooks",component:nt,meta:{requireAuth:!0}},{path:"/shopping-list",name:"ShoppingList",component:wt,meta:{requireAuth:!0}}],kt=new x["a"]({mode:"history",base:"",routes:yt,scrollBehavior(t,e,a){return a||{x:0,y:0}}});function Ct(){return r.state.user}let xt;kt.beforeResolve(async(t,e,a)=>(xt=Ct(),"SignIn"===t.name&&xt?a({name:"Home"}):t.matched.some(t=>t.meta.requireAuth)&&!xt?a({name:"SignIn"}):a()));var St=kt,Lt=a("9483");Object(Lt["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),s["a"].config.productionTip=!1,s["a"].config.ignoredElements=[/amplify-\w*/],new s["a"]({vuetify:C,router:St,store:r,render:t=>t(y)}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"9c0c":function(t,e,a){},ce3e:function(t,e,a){"use strict";a("eff1")},eff1:function(t,e,a){},f70f:function(t,e,a){t.exports=a.p+"img/shopping.65875f68.png"}});
//# sourceMappingURL=app.857be9d2.js.map